<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SF Pro Toolkit</title>
  <link rel="stylesheet" href="side-panel.css">
</head>
<body>
<!-- 
  ===== SF PRO TOOLKIT BRANDING STANDARDS =====
  
  LOGO USAGE:
  - Source: ../icons/icon-32.png (official extension icon)
  - Header: 28x28px with class="header-logo"
  - Modals: 32x32px with class="modal-icon"
  
  STANDARD MODAL HEADER PATTERN:
  <div class="modal-header">
    <div class="modal-header-title">
      <img src="../icons/icon-32.png" alt="SF Pro Toolkit" class="modal-icon">
      <h3>[Modal Title]</h3>
    </div>
    <button class="modal-close" id="close[Modal]Modal">&times;</button>
  </div>
  
  CHECKLIST FOR NEW MODALS:
  ‚úì modal-header has modal-header-title wrapper?
  ‚úì Includes icon-32.png with class="modal-icon"?
  ‚úì Alt text is "SF Pro Toolkit"?
  ‚úì CSS uses var(--logo-size-modal)?
-->
  <div class="side-panel-container">
    <!-- Header -->
    <div class="side-panel-header">
      <div class="header-content">
        <button class="header-btn" id="helpBtn" data-i18n-title="helpBtn" title="Help">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
            <line x1="12" y1="17" x2="12.01" y2="17"/>
          </svg>
        </button>
        <div class="header-title-group">
          <svg class="header-logo" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="32" height="32" rx="6" fill="url(#gradient1)"/>
            <path d="M9 12h14M9 16h14M9 20h10" stroke="white" stroke-width="2" stroke-linecap="round"/>
            <defs>
              <linearGradient id="gradient1" x1="0" y1="0" x2="32" y2="32" gradientUnits="userSpaceOnUse">
                <stop stop-color="#0070F2"/>
                <stop offset="1" stop-color="#0054A6"/>
              </linearGradient>
            </defs>
          </svg>
          <h1 class="header-title" data-i18n="headerTitle">SF Pro Toolkit</h1>
        </div>
        <div class="profile-switcher">
          <button class="profile-dropdown" id="profileDropdownBtn">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
              <polyline points="22,6 12,13 2,6"/>
            </svg>
            <span id="currentProfileName">Default</span>
            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="6 9 12 15 18 9"/>
            </svg>
          </button>
          <div class="profile-menu" id="profileMenu">
            <!-- Populated dynamically -->
          </div>
        </div>
      </div>
    </div>

    <!-- Global Search -->
    <div class="search-bar">
      <svg class="search-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="11" cy="11" r="8"/>
        <path d="m21 21-4.35-4.35"/>
      </svg>
      <input 
        type="text" 
        id="globalSearch" 
        class="search-input" 
        placeholder="Search environments, shortcuts, notes..."
        data-i18n-placeholder="globalSearchPlaceholder"
      >
      <span class="keyboard-hint" id="searchKeyboardHint">‚åòK</span>
      <button class="search-clear" id="clearSearch" style="display: none;">√ó</button>
    </div>

    <!-- Read-Only Mode Banner (All Profiles) -->
    <div class="readonly-banner" id="readonlyBanner" style="display: none;">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
        <circle cx="12" cy="12" r="3"/>
      </svg>
      <span>üìò Viewing all profiles (read-only mode)</span>
    </div>

    <!-- Environments Section -->
    <section class="section" data-section="environments">
      <div class="section-header">
        <button class="section-toggle-btn" data-section="environments" title="Collapse section">
          <svg class="section-toggle-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <polyline points="6 9 12 15 18 9"/>
          </svg>
        </button>
        <div>
          <h2 class="section-title">ENVIRONMENTS <span class="section-count"></span></h2>
          <p class="section-desc">Switch between Production, Preview, Sales, and Sandbox instances</p>
        </div>
        <button class="btn-add" id="addEnvBtn" data-title="Add Environment">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <line x1="12" y1="5" x2="12" y2="19"/>
            <line x1="5" y1="12" x2="19" y2="12"/>
          </svg>
        </button>
      </div>
      
      <div class="section-content">
        <div class="table-container">
          <table class="data-table" id="environmentsTable">
            <tbody id="environmentList">
              <tr class="empty-row">
                <td colspan="4">
                  <div class="empty-state">
                    <p>No saved environments</p>
                    <button class="btn btn-secondary btn-sm" id="addEnvBtnInline">+ Add Current Instance</button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Combined Shortcuts & Notes Section -->
    <section class="section" data-section="shortcuts">
      <div class="section-header">
        <button class="section-toggle-btn" data-section="shortcuts" title="Collapse section">
          <svg class="section-toggle-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <polyline points="6 9 12 15 18 9"/>
          </svg>
        </button>
        <div>
          <h2 class="section-title">SHORTCUTS <span class="section-count"></span></h2>
          <p class="section-desc">External links and reference information</p>
        </div>
        <button class="btn-add" id="addShortcutBtn" data-title="Add Shortcut" title="Add Shortcut" style="width: 32px; height: 32px;">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <line x1="12" y1="5" x2="12" y2="19"/>
            <line x1="5" y1="12" x2="19" y2="12"/>
          </svg>
        </button>
      </div>
      
      <!-- Shortcuts Content -->
      <div class="section-content">
        <div class="table-container">
          <table class="data-table" id="shortcutsTable">
            <tbody id="shortcutsList">
              <tr class="empty-row">
                <td colspan="4">
                  <div class="empty-state">
                    <p>No shortcuts</p>
                    <button class="btn btn-secondary btn-sm" id="addCurrentPageBtnEmpty">+ Add Current Page</button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Notes Section -->
    <section class="section" data-section="notes">
      <div class="section-header">
        <button class="section-toggle-btn" data-section="notes" title="Collapse section">
          <svg class="section-toggle-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <polyline points="6 9 12 15 18 9"/>
          </svg>
        </button>
        <div>
          <h2 class="section-title">SCRATCH NOTES <span class="section-count"></span></h2>
          <p class="section-desc">Store temporary IDs, URLs, and reference information</p>
        </div>
        <button class="btn btn-accent btn-sm" id="ossNoteBtn" title="Search OSS Note" style="padding: 6px 10px; font-size: 12px; margin-right: 8px;">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/>
            <path d="m21 21-4.35-4.35"/>
          </svg>
          OSS Note
        </button>
        <button class="btn-add" id="addNoteBtn" data-title="Add Note" title="Add Note">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <line x1="12" y1="5" x2="12" y2="19"/>
            <line x1="5" y1="12" x2="19" y2="12"/>
          </svg>
        </button>
      </div>
      
      <!-- OSS Note Search Form (Hidden by default) -->
      <div id="ossNoteSearchForm" class="oss-search-form" style="display: none;">
        <div class="oss-search-header">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/>
            <path d="m21 21-4.35-4.35"/>
          </svg>
          <span>Search SAP OSS Note</span>
        </div>
        
        <!-- Popular Notes Section -->
        <div class="popular-notes-section" id="popularNotesSection">
          <div class="popular-notes-header">
            <span class="popular-notes-title">üî• Popular Notes</span>
            <button class="toggle-popular-btn" id="togglePopularNotes" type="button" title="Toggle popular notes">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                <polyline points="6 9 12 15 18 9"/>
              </svg>
            </button>
          </div>
          <div class="popular-notes-grid" id="popularNotesGrid">
            <!-- Dynamically populated -->
          </div>
        </div>
        
        <input 
          type="text" 
          id="ossNoteInputInline" 
          placeholder="Enter OSS Note number (e.g., 3123456)"
          class="oss-search-input"
        >
        <div class="oss-search-actions">
          <button class="btn btn-primary btn-sm" id="openOssNoteInlineBtn">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/>
              <polyline points="15 3 21 3 21 9"/>
              <line x1="10" y1="14" x2="21" y2="3"/>
            </svg>
            Open
          </button>
          <button class="btn btn-secondary btn-sm" id="copyOssUrlBtn">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
            </svg>
            Copy URL
          </button>
          <button class="btn btn-secondary btn-sm" id="addOssShortcutBtn">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="12" y1="5" x2="12" y2="19"/>
              <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
            Add Shortcut
          </button>
          <button class="icon-btn" id="closeOssSearchBtn" title="Close" style="margin-left: auto;">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"/>
              <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
          </button>
        </div>
      </div>
      
      <!-- Notes Content -->
      <div class="section-content">
        <div class="table-container">
          <table class="data-table" id="notesTable">
            <tbody id="notesList">
              <tr class="empty-row">
                <td colspan="4">
                  <div class="empty-state">
                    <p>No notes</p>
                    <button class="btn btn-secondary btn-sm" id="addNoteBtnEmpty">+ Add Note</button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Sticky Footer -->
    <footer class="sticky-footer">
      <div class="footer-top-row">
        <button class="footer-btn" id="footerSettingsBtn" title="Settings">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"/>
            <path d="M12 1v6m0 6v6M5.6 5.6l4.2 4.2m4.2 4.2l4.2 4.2M1 12h6m6 0h6M5.6 18.4l4.2-4.2m4.2-4.2l4.2-4.2"/>
          </svg>
          <span class="footer-btn-label">Settings</span>
        </button>
        <button class="footer-btn" id="footerDiagnosticsBtn" title="Diagnostics">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <line x1="12" y1="16" x2="12" y2="12"/>
            <line x1="12" y1="8" x2="12.01" y2="8"/>
          </svg>
          <span class="footer-btn-label">Diagnostics</span>
        </button>
        <button class="footer-btn" id="footerThemeBtn" title="Toggle Theme" data-theme-active="false">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
          </svg>
          <span class="footer-btn-label">Theme</span>
        </button>
      </div>
      
      <!-- World Clock & Metadata -->
      <div class="footer-bottom-row">
        <div class="footer-metadata" id="footerMetadata">
          <span class="profile-update-date" id="profileUpdateDate" title="Profile content last updated"></span>
        </div>
        <div class="world-clock" id="worldClock" title="Click to configure timezones">
          <!-- Populated dynamically -->
        </div>
      </div>
    </footer>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>
  </div>

  <!-- Add Environment Modal -->
  <div class="modal" id="addEnvModal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-header-title">
          <svg class="modal-icon" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="32" height="32" rx="6" fill="url(#gradientModal1)"/>
            <path d="M9 12h14M9 16h14M9 20h10" stroke="white" stroke-width="2" stroke-linecap="round"/>
            <defs>
              <linearGradient id="gradientModal1" x1="0" y1="0" x2="32" y2="32" gradientUnits="userSpaceOnUse">
                <stop stop-color="#0070F2"/>
                <stop offset="1" stop-color="#0054A6"/>
              </linearGradient>
            </defs>
          </svg>
          <h3 data-i18n="addEnvironmentTitle">Add Environment</h3>
        </div>
        <button class="modal-close" id="closeAddEnvModal">&times;</button>
      </div>
      <div class="modal-body">
        <form id="addEnvForm">
          <div class="form-group">
            <label for="envName">
              <span data-i18n="environmentName">Environment Name</span> <span class="required-asterisk">*</span>
              <span class="char-counter" id="envNameCounter">0/100</span>
            </label>
            <input type="text" id="envName" data-i18n-placeholder="environmentNamePlaceholder" placeholder="e.g., Production DC68" required>
          </div>
          <div class="form-group">
            <label for="envType">
              <span data-i18n="environmentType">Environment Type</span> <span class="required-asterisk">*</span>
            </label>
            <select id="envType" required>
              <option value="production">üî¥ Production</option>
              <option value="preview">üü¢ Preview</option>
              <option value="sales">üü† Sales/Demo</option>
              <option value="sandbox">üü£ Sandbox</option>
            </select>
          </div>
          <div class="form-group">
            <label for="envHostname">
              <span data-i18n="hostname">Hostname</span> <span class="required-asterisk">*</span>
              <span class="char-counter" id="envHostnameCounter">0/255</span>
            </label>
            <input type="text" id="envHostname" data-i18n-placeholder="hostnamePlaceholder" placeholder="hcm-us20.hr.cloud.sap" required>
            <small style="color: var(--text-secondary); font-size: 11px; display: block; margin-top: 4px;">
              Enter SAP hostname without https:// (e.g., hcm-us20.hr.cloud.sap)
            </small>
          </div>
          <div class="form-group">
            <label for="envNotes">
              Notes (optional)
              <span class="char-counter" id="envNotesCounter">0/500</span>
            </label>
            <textarea id="envNotes" rows="2" placeholder="e.g., Test users, credentials, special configuration..."></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancelAddEnvBtn" data-i18n="cancel">Cancel</button>
        <button class="btn btn-primary" id="saveEnvBtn" data-i18n="saveEnvironment">Save</button>
      </div>
    </div>
  </div>

  <!-- Add Shortcut Modal -->
  <div class="modal" id="addShortcutModal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-header-title">
          <svg class="modal-icon" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="32" height="32" rx="6" fill="url(#gradientModal2)"/>
            <path d="M9 12h14M9 16h14M9 20h10" stroke="white" stroke-width="2" stroke-linecap="round"/>
            <defs>
              <linearGradient id="gradientModal2" x1="0" y1="0" x2="32" y2="32" gradientUnits="userSpaceOnUse">
                <stop stop-color="#0070F2"/>
                <stop offset="1" stop-color="#0054A6"/>
              </linearGradient>
            </defs>
          </svg>
          <h3 data-i18n="addShortcutTitle">Add Shortcut</h3>
        </div>
        <button class="modal-close" id="closeAddShortcutModal">&times;</button>
      </div>
      <div class="modal-body">
        <form id="addShortcutForm">
          <div class="form-group">
            <label for="shortcutName">
              <span data-i18n="shortcutName">Name</span> <span class="required-asterisk">*</span>
              <span class="char-counter" id="shortcutNameCounter">0/100</span>
            </label>
            <input type="text" id="shortcutName" placeholder="e.g., Admin Center" required>
          </div>
          <div class="form-group">
            <label for="shortcutPath">
              <span data-i18n="shortcutUrl">URL</span> <span class="required-asterisk">*</span>
              <span class="char-counter" id="shortcutPathCounter">0/2000</span>
            </label>
            <input type="text" id="shortcutPath" placeholder="e.g., https://roadmaps.sap.com/..." required>
            <small style="color: var(--text-secondary); font-size: 11px; display: block; margin-top: 4px;">
              Enter full URL starting with https:// (external links only)
            </small>
          </div>
          <div class="form-group">
            <label for="shortcutNotes">
              Notes
              <span class="char-counter" id="shortcutNotesCounter">0/500</span>
            </label>
            <input type="text" id="shortcutNotes" placeholder="Optional description">
          </div>
          <div class="form-group">
            <label for="shortcutTags">
              Tags (comma-separated)
              <span class="char-counter" id="shortcutTagsCounter">0/300</span>
            </label>
            <input type="text" id="shortcutTags" placeholder="e.g., SuccessFactors, Admin, Configuration">
            <small style="font-size: 10px; color: var(--text-tertiary); display: block; margin-top: 4px;">
              Use tags to organize and search shortcuts
            </small>
          </div>
          <div class="form-group">
            <label for="shortcutIcon">Icon</label>
            <select id="shortcutIcon">
              <optgroup label="üìö Documentation & Learning">
                <option value="map">üó∫Ô∏è Map/Roadmap</option>
                <option value="document">üìù Document</option>
                <option value="page">üìÑ Page</option>
                <option value="learning">üìö Learning</option>
                <option value="training">üéì Training</option>
                <option value="demo">üé™ Demo/Walkthrough</option>
              </optgroup>
              <optgroup label="‚öôÔ∏è Administration">
                <option value="settings">‚öôÔ∏è Settings</option>
                <option value="security">üîê Security</option>
                <option value="credentials">üîë Credentials</option>
                <option value="tools">üõ†Ô∏è Tools</option>
              </optgroup>
              <optgroup label="üí∞ Business">
                <option value="pricing">üí∞ Pricing/Cost</option>
                <option value="analytics">üìä Analytics</option>
                <option value="target">üéØ Target/Goal</option>
                <option value="company">üè¢ Company/Customer</option>
              </optgroup>
              <optgroup label="üåê Navigation">
                <option value="link">üîó Link</option>
                <option value="external">üåê External Link</option>
                <option value="preview-eye">üëÅÔ∏è Preview</option>
                <option value="datacenter">üåç Datacenter/Region</option>
              </optgroup>
              <optgroup label="üîî System & Technology">
                <option value="alert">üîî Alert/Notification</option>
                <option value="success">‚úÖ Success/Verified</option>
                <option value="warning">‚ö†Ô∏è Warning</option>
                <option value="sync">üîÑ Sync/Restore</option>
                <option value="ai">ü§ñ AI/Joule</option>
                <option value="package">üì¶ Package/Module</option>
              </optgroup>
              <optgroup label="üë• People">
                <option value="people">üë• People/Teams</option>
              </optgroup>
            </select>
            <small id="iconSuggestion" class="icon-suggestion" style="display: none; font-size: 10px; color: var(--accent-blue); margin-top: 4px;">
              üí° Suggested: <strong id="suggestedShortcutIconName"></strong>
              <button type="button" class="btn-link" id="acceptShortcutSuggestion" style="margin-left: 8px; font-size: 10px;">Use this</button>
            </small>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancelAddShortcutBtn">Cancel</button>
        <button class="btn btn-primary" id="saveShortcutBtn">Save</button>
      </div>
    </div>
  </div>

  <!-- Add Note Modal -->
  <div class="modal" id="addNoteModal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-header-title">
          <svg class="modal-icon" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="32" height="32" rx="6" fill="url(#gradientModal3)"/>
            <path d="M9 12h14M9 16h14M9 20h10" stroke="white" stroke-width="2" stroke-linecap="round"/>
            <defs>
              <linearGradient id="gradientModal3" x1="0" y1="0" x2="32" y2="32" gradientUnits="userSpaceOnUse">
                <stop stop-color="#0070F2"/>
                <stop offset="1" stop-color="#0054A6"/>
              </linearGradient>
            </defs>
          </svg>
          <h3>Scratch Note</h3>
        </div>
        <button class="modal-close" id="closeAddNoteModal">&times;</button>
      </div>
      <div class="modal-body">
        <form id="addNoteForm">
          <div class="form-group">
            <label for="noteTitle">
              <span>Title</span> <span class="required-asterisk">*</span>
              <span class="char-counter" id="noteTitleCounter">0/100</span>
            </label>
            <input type="text" id="noteTitle" placeholder="e.g., Test User IDs" required>
          </div>
          <div class="form-group">
            <label for="noteContent">
              Content
              <span class="char-counter" id="noteContentCounter">0</span>
            </label>
            <textarea id="noteContent" rows="6" placeholder="Paste IDs, URLs, configs..."></textarea>
            <small style="font-size: 10px; color: var(--text-tertiary); display: block; margin-top: 4px;">
              No character limit. Soft warning at 5000+ characters.
            </small>
          </div>
          <div class="form-group">
            <label for="noteTags">
              Tags (comma-separated)
              <span class="char-counter" id="noteTagsCounter">0/300</span>
            </label>
            <input type="text" id="noteTags" placeholder="e.g., Testing, Configuration, User-IDs">
            <small style="font-size: 10px; color: var(--text-tertiary); display: block; margin-top: 4px;">
              Use tags to organize and search notes
            </small>
          </div>
          <div class="form-group">
            <label for="noteIcon">Icon</label>
            <select id="noteIcon">
              <optgroup label="üìù General Notes">
                <option value="note">üìù Note</option>
                <option value="clipboard">üìã Clipboard</option>
                <option value="pin">üìå Pin</option>
                <option value="bookmark">üîñ Bookmark</option>
              </optgroup>
              <optgroup label="üîê Credentials & Security">
                <option value="key">üîë Key/Password</option>
                <option value="id">üÜî User ID</option>
                <option value="lock">üîí Security</option>
              </optgroup>
              <optgroup label="üîó Links & References">
                <option value="link">üîó Link/URL</option>
                <option value="world">üåê Web Resource</option>
                <option value="file">üìÑ File/Document</option>
              </optgroup>
              <optgroup label="‚öôÔ∏è Configuration">
                <option value="settings">‚öôÔ∏è Settings</option>
                <option value="code">üíª Code/Script</option>
                <option value="terminal">‚å®Ô∏è Command/Terminal</option>
              </optgroup>
              <optgroup label="üí° Ideas & Planning">
                <option value="idea">üí° Idea</option>
                <option value="question">‚ùì Question</option>
                <option value="checklist">‚úÖ Checklist/Todo</option>
              </optgroup>
              <optgroup label="‚ö†Ô∏è Important">
                <option value="warning">‚ö†Ô∏è Warning</option>
                <option value="alert">üö® Alert/Critical</option>
                <option value="flag">üö© Flag/Follow-up</option>
              </optgroup>
            </select>
            <small id="noteIconSuggestion" class="icon-suggestion" style="display: none; font-size: 10px; color: var(--accent-blue); margin-top: 4px;">
              üí° Suggested: <strong id="suggestedNoteIconName"></strong>
              <button type="button" class="btn-link" id="acceptNoteSuggestion" style="margin-left: 8px; font-size: 10px;">Use this</button>
            </small>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="prettifyNoteBtn" title="Format note content">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
          </svg>
          Format
        </button>
        <button class="btn btn-secondary" id="downloadNoteBtn" title="Download note as text file" style="display: none;">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="7 10 12 15 17 10"/>
            <line x1="12" y1="15" x2="12" y2="3"/>
          </svg>
          Download
        </button>
        <button class="btn btn-primary" id="saveNoteBtn">Save</button>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div class="modal modal-large" id="settingsModal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-header-title">
          <svg class="modal-icon" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="32" height="32" rx="6" fill="url(#gradientModal4)"/>
            <path d="M9 12h14M9 16h14M9 20h10" stroke="white" stroke-width="2" stroke-linecap="round"/>
            <defs>
              <linearGradient id="gradientModal4" x1="0" y1="0" x2="32" y2="32" gradientUnits="userSpaceOnUse">
                <stop stop-color="#0070F2"/>
                <stop offset="1" stop-color="#0054A6"/>
              </linearGradient>
            </defs>
          </svg>
          <h3>Settings</h3>
        </div>
        <button class="modal-close" id="closeSettingsModal">&times;</button>
      </div>
      <div class="modal-body">
        <!-- Tab Navigation -->
        <div class="settings-tabs">
          <button class="settings-tab active" data-tab="quick-actions">‚ö° Quick Actions</button>
          <button class="settings-tab" data-tab="backup">üì¶ Import/Export</button>
        </div>
        
        <!-- Tab 1: Quick Actions (Editable Text Fields) -->
        <div class="settings-tab-content active" id="quick-actions-tab">
          <p style="margin: 0 0 16px 0; font-size: 12px; color: var(--text-secondary);">
            Edit Quick Action names and paths, then click "Save All Changes" below.
          </p>
          <div id="qaEditableList">
            <!-- Populated dynamically with editable text fields -->
          </div>
          <div class="qa-save-footer" style="margin-top: 24px; padding-top: 16px; border-top: 1px solid var(--border);">
            <button class="btn btn-primary btn-block" id="saveAllQaBtn">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
                <polyline points="17 21 17 13 7 13 7 21"/>
                <polyline points="7 3 7 8 15 8"/>
              </svg>
              Save All Changes
            </button>
          </div>
        </div>
        
        <!-- Tab 2: Import/Export -->
        <div class="settings-tab-content" id="backup-tab">
          <h4 style="margin: 0 0 8px 0; font-size: 14px;">Export Configuration</h4>
          <p style="margin: 0 0 16px 0; font-size: 12px; color: var(--text-secondary);">
            Download all your environments, shortcuts, notes, and Quick Actions as JSON
          </p>
          <button class="btn btn-primary btn-block" id="exportAllBtn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="17 8 12 3 7 8"/>
              <line x1="12" y1="3" x2="12" y2="15"/>
            </svg>
            Export All Data
          </button>
          
          <div style="margin-top: 32px; padding-top: 32px; border-top: 1px solid var(--border);">
            <h4 style="margin: 0 0 8px 0; font-size: 14px;">Import Configuration</h4>
            <p style="margin: 0 0 16px 0; font-size: 12px; color: var(--text-secondary);">
              Import previously exported JSON file
            </p>
            <button class="btn btn-secondary btn-block" id="importJsonBtn">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="7 10 12 15 17 10"/>
                <line x1="12" y1="15" x2="12" y2="3"/>
              </svg>
              Import JSON File
            </button>
            <input type="file" id="importFileInput" accept=".json" style="display: none;">
          </div>
          
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="closeSettingsBtn">Close</button>
      </div>
    </div>
  </div>

  <!-- Profile Edit Modal -->
  <div class="modal" id="editProfileModal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-header-title">
          <svg class="modal-icon" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="32" height="32" rx="6" fill="url(#gradientModalProfile)"/>
            <path d="M9 12h14M9 16h14M9 20h10" stroke="white" stroke-width="2" stroke-linecap="round"/>
            <defs>
              <linearGradient id="gradientModalProfile" x1="0" y1="0" x2="32" y2="32" gradientUnits="userSpaceOnUse">
                <stop stop-color="#0070F2"/>
                <stop offset="1" stop-color="#0054A6"/>
              </linearGradient>
            </defs>
          </svg>
          <h3 id="profileModalTitle">Create Profile</h3>
        </div>
        <button class="modal-close" id="closeProfileModal">&times;</button>
      </div>
      <div class="modal-body">
        <form id="profileForm">
          <div class="form-group">
            <label for="profileName">
              Profile Name <span class="required-asterisk">*</span>
            </label>
            <input type="text" id="profileName" placeholder="e.g., Project Alpha" required>
          </div>
          <div class="form-group">
            <label for="profileDesc">Description</label>
            <textarea id="profileDesc" rows="2" placeholder="Brief description..."></textarea>
          </div>
          <div class="form-group">
            <label for="profileIcon">Icon</label>
            <select id="profileIcon">
              <option value="üíº">üíº Briefcase</option>
              <option value="üéØ">üéØ Target</option>
              <option value="üöÄ">üöÄ Rocket</option>
              <option value="üì¶">üì¶ Package</option>
              <option value="üîß">üîß Wrench</option>
              <option value="‚ö°">‚ö° Lightning</option>
              <option value="üåü">üåü Star</option>
              <option value="üìä">üìä Chart</option>
            </select>
          </div>
          <div class="form-group">
            <label for="profileBase">Base Profile</label>
            <select id="profileBase">
              <option value="profile-global">Global</option>
              <option value="profile-successfactors">SuccessFactors</option>
              <option value="profile-s4hana">S/4HANA</option>
              <option value="profile-btp">BTP & Integration</option>
            </select>
            <small style="color: var(--text-secondary); font-size: 11px; display: block; margin-top: 4px;">
              Inherit Quick Actions from base profile
            </small>
          </div>
          <div class="form-group checkbox" id="copyQuickActionsGroup" style="display: none;">
            <label>
              <input type="checkbox" id="profileCopyQuickActions" checked>
              Copy Quick Actions from source profile
            </label>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancelProfileBtn">Cancel</button>
        <button class="btn btn-primary" id="saveProfileBtn">Save</button>
      </div>
    </div>
  </div>

  <!-- Help Modal -->
  <div class="modal" id="helpModal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-header-title">
          <svg class="modal-icon" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="32" height="32" rx="6" fill="url(#gradientModal5)"/>
            <path d="M9 12h14M9 16h14M9 20h10" stroke="white" stroke-width="2" stroke-linecap="round"/>
            <defs>
              <linearGradient id="gradientModal5" x1="0" y1="0" x2="32" y2="32" gradientUnits="userSpaceOnUse">
                <stop stop-color="#0070F2"/>
                <stop offset="1" stop-color="#0054A6"/>
              </linearGradient>
            </defs>
          </svg>
          <h3>About SF Pro Toolkit</h3>
        </div>
        <button class="modal-close" id="closeHelpModal">&times;</button>
      </div>
      <div class="modal-body">
        <p style="font-size: 12px; line-height: 1.6; color: var(--text-secondary); margin-bottom: 20px;">
          SAP Pro Toolkit helps SAP professionals work more efficiently by providing quick access to environments, shortcuts, and diagnostic tools.
        </p>
        
        <h4 style="font-size: 13px; font-weight: 600; margin-bottom: 10px; color: var(--text-primary);">Key Features</h4>
        <ul style="font-size: 12px; line-height: 1.8; color: var(--text-secondary); margin: 0; padding-left: 20px;">
          <li><strong>Side Panel</strong>: Always accessible on the right side while you work</li>
          <li><strong>Environment Switching</strong>: Quickly switch between Production, Preview, Sales instances</li>
          <li><strong>Pin Environments</strong>: ‚≠ê Star icon to pin favorite environments to the top</li>
          <li><strong>Usage Tracking</strong>: See when you last accessed each environment and how often</li>
          <li><strong>Environment Notes</strong>: Add custom notes to environments (test users, configs, etc.)</li>
          <li><strong>Profile System</strong>: Organize configurations by profile (Global, SuccessFactors, S/4HANA, BTP, etc.)</li>
          <li><strong>New Content Notifications</strong>: Get notified when profile content is updated (üìã toast notification)</li>
          <li><strong>Read-Only Mode</strong>: View all profiles combined without accidental modifications</li>
          <li><strong>Smart URLs</strong>: Supports absolute external URLs for shortcuts</li>
          <li><strong>Scratch Notes</strong>: Store temporary IDs, URLs, and reference information with formatting tools</li>
          <li><strong>JSON Import/Export</strong>: Backup and share your configuration</li>
          <li><strong>System Diagnostics</strong>: Generate detailed reports for troubleshooting</li>
          <li><strong>Multi-language Support</strong>: Available in 10+ languages</li>
        </ul>
        
        <h4 style="font-size: 13px; font-weight: 600; margin: 20px 0 10px; color: var(--text-primary);">‚å®Ô∏è Keyboard Shortcuts</h4>
        <div class="keyboard-shortcuts-grid">
          <div class="shortcut-item">
            <kbd id="modKey1">‚åò</kbd><kbd>K</kbd>
            <span class="shortcut-desc">Focus search bar</span>
          </div>
          <div class="shortcut-item">
            <kbd id="modKey2">‚åò</kbd><kbd>J</kbd>
            <span class="shortcut-desc">Add shortcut from current page</span>
          </div>
          <div class="shortcut-item">
            <kbd id="modKey3">‚åò</kbd><kbd>E</kbd>
            <span class="shortcut-desc">Add current environment</span>
          </div>
          <div class="shortcut-item">
            <kbd id="modKey4">‚åò</kbd><kbd>Shift</kbd><kbd>1</kbd>
            <span class="shortcut-desc">Quick switch to 1st environment</span>
          </div>
          <div class="shortcut-item">
            <kbd id="modKey5">‚åò</kbd><kbd>Shift</kbd><kbd>2</kbd>
            <span class="shortcut-desc">Quick switch to 2nd environment</span>
          </div>
          <div class="shortcut-item">
            <kbd id="modKey6">‚åò</kbd><kbd>M</kbd>
            <span class="shortcut-desc">Add new note</span>
          </div>
          <div class="shortcut-item">
            <kbd>‚Üë</kbd><kbd>‚Üì</kbd>
            <span class="shortcut-desc">Navigate items</span>
          </div>
          <div class="shortcut-item">
            <kbd>Tab</kbd>
            <span class="shortcut-desc">Navigate buttons</span>
          </div>
          <div class="shortcut-item">
            <kbd>Enter</kbd>
            <span class="shortcut-desc">Open selected item</span>
          </div>
          <div class="shortcut-item">
            <kbd>Esc</kbd>
            <span class="shortcut-desc">Close modal/clear search</span>
          </div>
        </div>
        
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" id="closeHelpBtn">Got it!</button>
      </div>
    </div>
  </div>

  <!-- Diagnostics Modal -->
  <div class="modal modal-large" id="diagnosticsModal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-header-title">
          <svg class="modal-icon" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="32" height="32" rx="6" fill="url(#gradientModal6)"/>
            <path d="M9 12h14M9 16h14M9 20h10" stroke="white" stroke-width="2" stroke-linecap="round"/>
            <defs>
              <linearGradient id="gradientModal6" x1="0" y1="0" x2="32" y2="32" gradientUnits="userSpaceOnUse">
                <stop stop-color="#0070F2"/>
                <stop offset="1" stop-color="#0054A6"/>
              </linearGradient>
            </defs>
          </svg>
          <h3>System Diagnostics</h3>
        </div>
        <button class="modal-close" id="closeDiagnosticsModal">&times;</button>
      </div>
      <div class="modal-body">
        <div id="diagnosticsContent" class="diagnostics-content">
          <div class="diagnostics-loading">
            <div class="spinner"></div>
            <span>Gathering diagnostics...</span>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="closeDiagnosticsBtn">Close</button>
        <button class="btn btn-primary" id="copyAllDiagnosticsBtn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
          </svg>
          Copy All
        </button>
      </div>
    </div>
  </div>

  <script src="crypto-utils.js"></script>
  <script src="sap-icon-library.js"></script>
  <script src="validation.js"></script>
  <script src="toolkit-core.js"></script>
  <script src="side-panel.js"></script>
</body>
</html>
